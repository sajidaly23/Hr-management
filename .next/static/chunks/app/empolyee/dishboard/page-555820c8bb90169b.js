(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{8983:function(e,t,s){Promise.resolve().then(s.bind(s,6855))},6855:function(e,t,s){"use strict";s.r(t);var l=s(7437),r=s(2265),i=s(4033),a=s(5322),n=s(1728);t.default=()=>{var e;let t=(0,i.useRouter)(),{tasks:s,currentUser:d,employees:c}=(0,a.q)(),[o,m]=(0,r.useState)([]),[x,p]=(0,r.useState)({checkIn:null,checkOut:null});(0,r.useEffect)(()=>{let e=localStorage.getItem("hr_attendance");e&&m(JSON.parse(e))},[]),(0,r.useEffect)(()=>{if(d){let e=new Date().toISOString().split("T")[0],t=o.find(t=>t.employeeEmail===d.email&&t.date===e);t?p({checkIn:t.checkIn,checkOut:t.checkOut}):p({checkIn:null,checkOut:null})}},[o,d]);let h=d?c.find(e=>e.email===d.email):null,u=d?s.filter(e=>e.assignedTo===d.email):[],f=new Date().toISOString().slice(0,7),g=o.filter(e=>e.employeeEmail===(null==d?void 0:d.email)&&e.date.startsWith(f)),j={totalTasks:u.length,completedTasks:u.filter(e=>"completed"===e.status).length,pendingTasks:u.filter(e=>"pending"===e.status).length,performance:u.length>0?Math.round(u.filter(e=>"completed"===e.status).length/u.length*100):0,presentDays:g.filter(e=>"present"===e.status).length,lateDays:g.filter(e=>"late"===e.status).length,totalWorkingHours:g.reduce((e,t)=>e+(t.workingHours||0),0)};return(0,l.jsx)(n.Z,{allowedRoles:["employee","Employee"],children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("h1",{className:"text-4xl font-bold text-white mb-2",children:["Welcome back, ",(null==h?void 0:h.name)||(null==d?void 0:null===(e=d.email)||void 0===e?void 0:e.split("@")[0])||"Employee","!"]}),(0,l.jsx)("p",{className:"text-white/70",children:(null==h?void 0:h.department)&&(null==h?void 0:h.position)?"".concat(h.position," • ").concat(h.department):"Here's your overview"})]}),h&&(0,l.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10 mb-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-fuchsia-500 rounded-full flex items-center justify-center text-white font-bold text-xl",children:h.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-white",children:h.name}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-sm text-white/70",children:[(0,l.jsx)("span",{children:h.position||"Employee"}),(0,l.jsx)("span",{children:"•"}),(0,l.jsx)("span",{children:h.department||"N/A"}),(0,l.jsx)("span",{children:"•"}),(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Active"===h.status?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"),children:h.status})]}),(0,l.jsx)("p",{className:"text-sm text-white/60 mt-1",children:h.email})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-sm text-white/70",children:"Employee ID"}),(0,l.jsx)("p",{className:"text-lg font-semibold text-white",children:h.id}),h.joinDate&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-sm text-white/70 mt-2",children:"Join Date"}),(0,l.jsx)("p",{className:"text-sm font-medium text-white",children:new Date(h.joinDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]})]})}),(0,l.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10 mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Today's Attendance"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 glass-effect border border-white/10 rounded-xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Check In"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white",children:x.checkIn||"Not checked in"})]}),(0,l.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(x.checkIn?"bg-green-500/20":"bg-gray-500/20"),children:(0,l.jsx)("span",{className:"text-2xl",children:x.checkIn?"✓":"○"})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 glass-effect border border-white/10 rounded-xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Check Out"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white",children:x.checkOut||"Not checked out"})]}),(0,l.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(x.checkOut?"bg-red-500/20":"bg-gray-500/20"),children:(0,l.jsx)("span",{className:"text-2xl",children:x.checkOut?"✓":"○"})})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,l.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Total Tasks"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-white",children:j.totalTasks})]}),(0,l.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCB"})})]})}),(0,l.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Completed Tasks"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-green-400",children:j.completedTasks})]}),(0,l.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"✅"})})]})}),(0,l.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Present Days"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:j.presentDays})]}),(0,l.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC5"})})]})}),(0,l.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Working Hours"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-purple-400",children:j.totalWorkingHours.toFixed(1)})]}),(0,l.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"⏱"})})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Quick Actions"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("button",{onClick:()=>t.push("/empolyee/taskpage"),className:"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-fuchsia-500 text-white rounded-xl hover:shadow-lg transition-all duration-200 text-left flex items-center space-x-3",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCB"}),(0,l.jsx)("span",{children:"View My Tasks"})]}),(0,l.jsxs)("button",{onClick:()=>t.push("/empolyee/attendance"),className:"w-full px-4 py-3 glass-effect border border-white/10 text-white rounded-xl hover:bg-white/10 transition-all duration-200 text-left flex items-center space-x-3",children:[(0,l.jsx)("span",{children:"⏰"}),(0,l.jsx)("span",{children:"Check In/Out"})]})]})]}),(0,l.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Recent Tasks"}),(0,l.jsx)("div",{className:"space-y-4",children:u.slice(0,3).length>0?u.slice(0,3).map(e=>(0,l.jsxs)("div",{className:"flex items-start space-x-3 p-3 glass-effect border border-white/10 rounded-xl",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("completed"===e.status?"bg-green-500/30 text-green-300":"bg-orange-500/30 text-orange-300"),children:(0,l.jsx)("span",{children:"completed"===e.status?"✓":"\uD83D\uDCCB"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"font-medium text-white",children:e.title}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,l.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("High"===e.priority?"bg-red-500/20 text-red-300":"Medium"===e.priority?"bg-yellow-500/20 text-yellow-300":"bg-blue-500/20 text-blue-300"),children:e.priority}),(0,l.jsxs)("span",{className:"text-xs text-white/60",children:["Due: ",e.dueDate]})]})]})]},e.id)):(0,l.jsx)("p",{className:"text-white/60 text-center py-4",children:"No tasks assigned yet"})})]})]})]})})}},1728:function(e,t,s){"use strict";var l=s(7437),r=s(2265),i=s(4033),a=s(5322);t.Z=e=>{let{children:t,allowedRoles:s}=e,{currentUser:n,isAuthenticated:d}=(0,a.q)(),c=(0,i.useRouter)(),o=(0,i.usePathname)();if((0,r.useEffect)(()=>{if(!d){c.push("/auth/loginpage");return}if(n){let e=n.role,t="SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"employee",l=s.map(e=>"SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"Employee"===e?"employee":"super_admin"===e?"super_admin":"admin"===e?"admin":"employee"===e?"employee":e);l.includes(t)||("employee"===t?c.push("/empolyee/dishboard"):"admin"===t?c.push("/addmin/dishboardpage"):"super_admin"===t?c.push("/superadmin/dashboard"):c.push("/auth/loginpage"))}},[n,d,s,c,o]),!d||!n)return null;let m=n.role,x=s.map(e=>"SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"Employee"===e?"employee":"super_admin"===e?"super_admin":"admin"===e?"admin":"employee"===e?"employee":e);return x.includes("SuperAdmin"===m?"super_admin":"Admin"===m?"admin":"employee")?(0,l.jsx)(l.Fragment,{children:t}):null}},5322:function(e,t,s){"use strict";s.d(t,{q:function(){return n},w:function(){return a}});var l=s(7437),r=s(2265);let i=(0,r.createContext)(void 0),a=e=>{let{children:t}=e,[s,a]=(0,r.useState)([]),[n,d]=(0,r.useState)([]),[c,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let t=JSON.parse(e);o({email:t.email,role:"super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee"})}catch(e){console.error("Error parsing user data:",e)}let t=localStorage.getItem("hr_employees"),s=localStorage.getItem("hr_tasks");if(t)a(JSON.parse(t));else{let e=[{id:"1",name:"Ali Khan",email:"ali@example.com",department:"Engineering",position:"Software Developer",phone:"+1 234 567 8900",address:"123 Main St, City, State 12345",joinDate:"2023-01-15",role:"Employee",status:"Active"},{id:"2",name:"Sara Ahmed",email:"sara@example.com",department:"Marketing",position:"Marketing Manager",phone:"+1 234 567 8901",address:"456 Oak Ave, City, State 12345",joinDate:"2023-02-20",role:"Employee",status:"Active"},{id:"3",name:"Admin User",email:"admin@example.com",department:"Administration",position:"System Administrator",phone:"+1 234 567 8902",address:"789 Admin Blvd, City, State 12345",joinDate:"2023-01-01",role:"Admin",status:"Active"}];a(e),localStorage.setItem("hr_employees",JSON.stringify(e))}if(s)d(JSON.parse(s));else{let e=[{id:"1",title:"Complete quarterly report",status:"pending",priority:"High",dueDate:"2024-01-20",assignedTo:"ali@example.com",description:"Complete the quarterly financial report"},{id:"2",title:"Update database schema",status:"completed",priority:"Medium",dueDate:"2024-01-15",assignedTo:"ali@example.com",description:"Update the database schema for new features"},{id:"3",title:"Review code changes",status:"pending",priority:"Medium",dueDate:"2024-01-22",assignedTo:"sara@example.com",description:"Review pull requests and code changes"}];d(e),localStorage.setItem("hr_tasks",JSON.stringify(e))}},[]),(0,r.useEffect)(()=>{s.length>0&&localStorage.setItem("hr_employees",JSON.stringify(s))},[s]),(0,r.useEffect)(()=>{n.length>0&&localStorage.setItem("hr_tasks",JSON.stringify(n))},[n]),(0,l.jsx)(i.Provider,{value:{employees:s,addEmployee:e=>{let t={...e,id:Date.now().toString(),joinDate:e.joinDate||new Date().toISOString().split("T")[0]};a([...s,t])},updateEmployee:(e,t)=>{a(s.map(s=>s.id===e?{...s,...t}:s))},deleteEmployee:e=>{a(s.filter(t=>t.id!==e)),d(n.filter(t=>{var l;return t.assignedTo!==(null===(l=s.find(t=>t.id===e))||void 0===l?void 0:l.email)}))},getEmployee:e=>s.find(t=>t.id===e),tasks:n,addTask:e=>{let t={...e,id:Date.now().toString()};d([...n,t])},updateTask:(e,t)=>{d(n.map(s=>s.id===e?{...s,...t}:s))},deleteTask:e=>{d(n.filter(t=>t.id!==e))},getTasksByEmployee:e=>n.filter(t=>t.assignedTo===e),currentUser:c,login:(e,t)=>{let l=localStorage.getItem("user");if(l)try{let t=JSON.parse(l),s="super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee";return o({email:t.email||e,role:s}),!0}catch(e){console.error("Error parsing user data:",e)}let r=s.find(t=>t.email===e);return!!r&&(o({email:r.email,role:"Admin"===r.role?"Admin":"Employee"}),!0)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),o(null)},isAuthenticated:!!c},children:t})},n=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e}},622:function(e,t,s){"use strict";var l=s(2265),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var l,i={},c=null,o=null;for(l in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(o=t.ref),t)a.call(t,l)&&!d.hasOwnProperty(l)&&(i[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===i[l]&&(i[l]=t[l]);return{$$typeof:r,type:e,key:c,ref:o,props:i,_owner:n.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=8983)}),_N_E=e.O()}]);