(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{1683:function(e,t,r){Promise.resolve().then(r.bind(r,5106))},5106:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(2265),i=r(5322),l=r(1728);t.default=()=>{let{currentUser:e,employees:t}=(0,i.q)(),[r,n]=(0,a.useState)([]),[o,d]=(0,a.useState)({checkIn:null,checkOut:null}),[c,m]=(0,a.useState)(new Date().toISOString().slice(0,7));(0,a.useEffect)(()=>{let e=localStorage.getItem("hr_attendance");e&&n(JSON.parse(e))},[]),(0,a.useEffect)(()=>{if(e){let t=new Date().toISOString().split("T")[0],s=r.find(r=>r.employeeEmail===e.email&&r.date===t);s?d({checkIn:s.checkIn,checkOut:s.checkOut}):d({checkIn:null,checkOut:null})}},[r,e]),(0,a.useEffect)(()=>{r.length>0&&localStorage.setItem("hr_attendance",JSON.stringify(r))},[r]);let h=r.filter(t=>t.employeeEmail===(null==e?void 0:e.email)&&t.date.startsWith(c)).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),u={present:h.filter(e=>"present"===e.status).length,late:h.filter(e=>"late"===e.status).length,totalWorkingHours:h.reduce((e,t)=>e+(t.workingHours||0),0),totalDays:h.length},x=e=>"present"===e?"bg-green-500/20 text-green-300 border-green-500/50":"late"===e?"bg-orange-500/20 text-orange-300 border-orange-500/50":"bg-red-500/20 text-red-300 border-red-500/50";return(0,s.jsx)(l.Z,{allowedRoles:["employee","Employee"],children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Attendance"}),(0,s.jsx)("p",{className:"text-white/70",children:"Track your check-in and check-out times"})]}),(0,s.jsxs)("div",{className:"glass-effect rounded-2xl p-8 card-shadow border border-white/10",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Today's Attendance"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass-effect rounded-xl p-6 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Check In Time"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:o.checkIn||"Not checked in"})]}),(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("button",{onClick:()=>{if(!e)return;let s=new Date,a=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),i=s.toISOString().split("T")[0],l=t.find(t=>t.email===e.email);if(!l)return;let c=r.find(t=>t.employeeEmail===e.email&&t.date===i);if(c&&c.checkIn){alert("You have already checked in today!");return}let m=s.getHours(),h=s.getMinutes(),u=m>9||9===m&&h>0,x={id:(null==c?void 0:c.id)||Date.now().toString(),employeeId:l.id,employeeEmail:e.email,employeeName:l.name,date:i,checkIn:a,checkOut:(null==c?void 0:c.checkOut)||null,status:u?"late":"present",workingHours:null};c?n(r.map(e=>e.id===c.id?x:e)):n([...r,x]),d({checkIn:a,checkOut:o.checkOut}),alert("Checked in at ".concat(a).concat(u?" (Late)":""))},disabled:!!o.checkIn,className:"w-full px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(o.checkIn?"bg-gray-600/50 text-gray-400 cursor-not-allowed border border-gray-600/50":"bg-gradient-to-r from-green-600 to-green-500 text-white hover:shadow-lg hover:scale-105"),children:o.checkIn?"✓ Already Checked In":"Check In"})]}),(0,s.jsxs)("div",{className:"glass-effect rounded-xl p-6 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Check Out Time"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-white",children:o.checkOut||"Not checked out"})]}),(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("button",{onClick:()=>{if(!e)return;let t=new Date,s=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),a=t.toISOString().split("T")[0],i=r.find(t=>t.employeeEmail===e.email&&t.date===a);if(!i||!i.checkIn){alert("Please check in first!");return}if(i.checkOut){alert("You have already checked out today!");return}let l=new Date("".concat(a," ").concat(i.checkIn)),c=t.getTime()-l.getTime(),m=Math.round(c/36e5*10)/10,h={...i,checkOut:s,workingHours:m};n(r.map(e=>e.id===i.id?h:e)),d({checkIn:o.checkIn,checkOut:s}),alert("Checked out at ".concat(s,". Working hours: ").concat(m," hours"))},disabled:!o.checkIn||!!o.checkOut,className:"w-full px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(!o.checkIn||o.checkOut?"bg-gray-600/50 text-gray-400 cursor-not-allowed border border-gray-600/50":"bg-gradient-to-r from-red-600 to-red-500 text-white hover:shadow-lg hover:scale-105"),children:o.checkOut?"✓ Already Checked Out":"Check Out"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Present Days"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-400",children:u.present})]}),(0,s.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"✅"})})]})}),(0,s.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Late Days"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-orange-400",children:u.late})]}),(0,s.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"⏰"})})]})}),(0,s.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Total Hours"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-400",children:u.totalWorkingHours.toFixed(1)})]}),(0,s.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"⏱"})})]})}),(0,s.jsx)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-white/70 mb-1",children:"Total Days"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:u.totalDays})]}),(0,s.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC5"})})]})})]}),(0,s.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Attendance History"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Select Month"}),(0,s.jsx)("input",{type:"month",value:c,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-purple-400 rounded-xl bg-transparent text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-400 transition-all duration-200 outline-none"})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-white/10",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-white",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-white",children:"Check In"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-white",children:"Check Out"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-white",children:"Working Hours"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-white",children:"Status"})]})}),(0,s.jsx)("tbody",{children:h.length>0?h.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors ".concat(t%2==0?"bg-white/2":""),children:[(0,s.jsx)("td",{className:"px-4 py-3 text-white/90",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-white/90",children:e.checkIn||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-white/90",children:e.checkOut||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-white/90",children:e.workingHours?"".concat(e.workingHours," hrs"):"-"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(x(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-4 py-8 text-center text-white/70",children:"No attendance records found for the selected month"})})})]})})]})]})})}},1728:function(e,t,r){"use strict";var s=r(7437),a=r(2265),i=r(4033),l=r(5322);t.Z=e=>{let{children:t,allowedRoles:r}=e,{currentUser:n,isAuthenticated:o}=(0,l.q)(),d=(0,i.useRouter)(),c=(0,i.usePathname)();if((0,a.useEffect)(()=>{if(!o){d.push("/auth/loginpage");return}if(n){let e=n.role,t="SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"employee",s=r.map(e=>"SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"Employee"===e?"employee":"super_admin"===e?"super_admin":"admin"===e?"admin":"employee"===e?"employee":e);s.includes(t)||("employee"===t?d.push("/empolyee/dishboard"):"admin"===t?d.push("/addmin/dishboardpage"):"super_admin"===t?d.push("/superadmin/dashboard"):d.push("/auth/loginpage"))}},[n,o,r,d,c]),!o||!n)return null;let m=n.role,h=r.map(e=>"SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"Employee"===e?"employee":"super_admin"===e?"super_admin":"admin"===e?"admin":"employee"===e?"employee":e);return h.includes("SuperAdmin"===m?"super_admin":"Admin"===m?"admin":"employee")?(0,s.jsx)(s.Fragment,{children:t}):null}},5322:function(e,t,r){"use strict";r.d(t,{q:function(){return n},w:function(){return l}});var s=r(7437),a=r(2265);let i=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)([]),[n,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let t=JSON.parse(e);c({email:t.email,role:"super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee"})}catch(e){console.error("Error parsing user data:",e)}let t=localStorage.getItem("hr_employees"),r=localStorage.getItem("hr_tasks");if(t)l(JSON.parse(t));else{let e=[{id:"1",name:"Ali Khan",email:"ali@example.com",department:"Engineering",position:"Software Developer",phone:"+1 234 567 8900",address:"123 Main St, City, State 12345",joinDate:"2023-01-15",role:"Employee",status:"Active"},{id:"2",name:"Sara Ahmed",email:"sara@example.com",department:"Marketing",position:"Marketing Manager",phone:"+1 234 567 8901",address:"456 Oak Ave, City, State 12345",joinDate:"2023-02-20",role:"Employee",status:"Active"},{id:"3",name:"Admin User",email:"admin@example.com",department:"Administration",position:"System Administrator",phone:"+1 234 567 8902",address:"789 Admin Blvd, City, State 12345",joinDate:"2023-01-01",role:"Admin",status:"Active"}];l(e),localStorage.setItem("hr_employees",JSON.stringify(e))}if(r)o(JSON.parse(r));else{let e=[{id:"1",title:"Complete quarterly report",status:"pending",priority:"High",dueDate:"2024-01-20",assignedTo:"ali@example.com",description:"Complete the quarterly financial report"},{id:"2",title:"Update database schema",status:"completed",priority:"Medium",dueDate:"2024-01-15",assignedTo:"ali@example.com",description:"Update the database schema for new features"},{id:"3",title:"Review code changes",status:"pending",priority:"Medium",dueDate:"2024-01-22",assignedTo:"sara@example.com",description:"Review pull requests and code changes"}];o(e),localStorage.setItem("hr_tasks",JSON.stringify(e))}},[]),(0,a.useEffect)(()=>{r.length>0&&localStorage.setItem("hr_employees",JSON.stringify(r))},[r]),(0,a.useEffect)(()=>{n.length>0&&localStorage.setItem("hr_tasks",JSON.stringify(n))},[n]),(0,s.jsx)(i.Provider,{value:{employees:r,addEmployee:e=>{let t={...e,id:Date.now().toString(),joinDate:e.joinDate||new Date().toISOString().split("T")[0]};l([...r,t])},updateEmployee:(e,t)=>{l(r.map(r=>r.id===e?{...r,...t}:r))},deleteEmployee:e=>{l(r.filter(t=>t.id!==e)),o(n.filter(t=>{var s;return t.assignedTo!==(null===(s=r.find(t=>t.id===e))||void 0===s?void 0:s.email)}))},getEmployee:e=>r.find(t=>t.id===e),tasks:n,addTask:e=>{let t={...e,id:Date.now().toString()};o([...n,t])},updateTask:(e,t)=>{o(n.map(r=>r.id===e?{...r,...t}:r))},deleteTask:e=>{o(n.filter(t=>t.id!==e))},getTasksByEmployee:e=>n.filter(t=>t.assignedTo===e),currentUser:d,login:(e,t)=>{let s=localStorage.getItem("user");if(s)try{let t=JSON.parse(s),r="super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee";return c({email:t.email||e,role:r}),!0}catch(e){console.error("Error parsing user data:",e)}let a=r.find(t=>t.email===e);return!!a&&(c({email:a.email,role:"Admin"===a.role?"Admin":"Employee"}),!0)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),c(null)},isAuthenticated:!!d},children:t})},n=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e}},622:function(e,t,r){"use strict";var s=r(2265),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var s,i={},d=null,c=null;for(s in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,s)&&!o.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:a,type:e,key:d,ref:c,props:i,_owner:n.current}}t.Fragment=i,t.jsx=d,t.jsxs=d},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=1683)}),_N_E=e.O()}]);