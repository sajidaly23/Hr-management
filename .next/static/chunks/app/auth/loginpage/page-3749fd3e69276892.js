(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[658],{178:function(e,t,r){Promise.resolve().then(r.bind(r,5547))},5547:function(e,t,r){"use strict";r.r(t);var a=r(7437),s=r(2265),i=r(4033),l=r(1396),n=r.n(l),o=r(5322);t.default=()=>{let[e,t]=(0,s.useState)(""),[r,l]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[c,p]=(0,s.useState)("");(0,i.useRouter)();let{login:u}=(0,o.q)(),h=async t=>{t.preventDefault(),p(""),m(!0);try{let t;let a=await fetch("".concat("/api","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),s=await a.text();try{t=s?JSON.parse(s):{}}catch(e){throw console.error("Non-JSON response from /auth/login:",s),Error("Server returned an invalid response")}if(!a.ok)throw Error(t.message||"Invalid email or password");if(t.success&&t.data){localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),u(e,r);let a=t.data.user.role,s="/empolyee/dishboard";"super_admin"===a?s="/superadmin/dashboard":"admin"===a&&(s="/addmin/dishboardpage"),window.location.href=s}else throw Error("Login failed: Invalid response from server")}catch(e){p(e.message||"Login failed. Please try again."),m(!1)}};return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"w-full max-w-md mx-4",children:(0,a.jsxs)("div",{className:"glass-effect card-shadow rounded-3xl p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl mx-auto mb-4 shadow-lg",children:"HR"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-white/70",children:"Sign in to your HR Management account"})]}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Email Address"}),(0,a.jsx)("input",{type:"email",placeholder:"Enter your email",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-4 py-3 border border-purple-400 rounded-xl bg-transparent text-white placeholder-white/60 focus:ring-2 focus:ring-purple-500 focus:border-purple-400 transition-all duration-200 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",placeholder:"Enter your password",value:r,onChange:e=>l(e.target.value),required:!0,className:"w-full px-4 py-3 border border-purple-400 rounded-xl bg-transparent text-white placeholder-white/60 focus:ring-2 focus:ring-purple-500 focus:border-purple-400 transition-all duration-200 outline-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",className:"w-4 h-4 text-purple-600 border-purple-400 rounded focus:ring-purple-500 bg-transparent"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-white/70",children:"Remember me"})]}),(0,a.jsx)("a",{href:"#",className:"text-sm text-purple-300 hover:text-purple-200 font-medium",children:"Forgot password?"})]}),c&&(0,a.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 text-red-300 px-4 py-3 rounded-xl text-sm",children:c}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{children:"Signing in..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83D\uDD10"}),(0,a.jsx)("span",{children:"Sign In"})]})})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-white/70",children:["Don't have an account?"," ",(0,a.jsx)(n(),{href:"/auth/registerpage",className:"text-purple-300 hover:text-purple-200 font-medium",children:"Register Now"})]})})]})})})}},5322:function(e,t,r){"use strict";r.d(t,{q:function(){return n},w:function(){return l}});var a=r(7437),s=r(2265);let i=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[d,m]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let t=JSON.parse(e);m({email:t.email,role:"super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee"})}catch(e){console.error("Error parsing user data:",e)}let t=localStorage.getItem("hr_employees"),r=localStorage.getItem("hr_tasks");if(t)l(JSON.parse(t));else{let e=[{id:"1",name:"Ali Khan",email:"ali@example.com",department:"Engineering",position:"Software Developer",phone:"+1 234 567 8900",address:"123 Main St, City, State 12345",joinDate:"2023-01-15",role:"Employee",status:"Active"},{id:"2",name:"Sara Ahmed",email:"sara@example.com",department:"Marketing",position:"Marketing Manager",phone:"+1 234 567 8901",address:"456 Oak Ave, City, State 12345",joinDate:"2023-02-20",role:"Employee",status:"Active"},{id:"3",name:"Admin User",email:"admin@example.com",department:"Administration",position:"System Administrator",phone:"+1 234 567 8902",address:"789 Admin Blvd, City, State 12345",joinDate:"2023-01-01",role:"Admin",status:"Active"}];l(e),localStorage.setItem("hr_employees",JSON.stringify(e))}if(r)o(JSON.parse(r));else{let e=[{id:"1",title:"Complete quarterly report",status:"pending",priority:"High",dueDate:"2024-01-20",assignedTo:"ali@example.com",description:"Complete the quarterly financial report"},{id:"2",title:"Update database schema",status:"completed",priority:"Medium",dueDate:"2024-01-15",assignedTo:"ali@example.com",description:"Update the database schema for new features"},{id:"3",title:"Review code changes",status:"pending",priority:"Medium",dueDate:"2024-01-22",assignedTo:"sara@example.com",description:"Review pull requests and code changes"}];o(e),localStorage.setItem("hr_tasks",JSON.stringify(e))}},[]),(0,s.useEffect)(()=>{r.length>0&&localStorage.setItem("hr_employees",JSON.stringify(r))},[r]),(0,s.useEffect)(()=>{n.length>0&&localStorage.setItem("hr_tasks",JSON.stringify(n))},[n]),(0,a.jsx)(i.Provider,{value:{employees:r,addEmployee:e=>{let t={...e,id:Date.now().toString(),joinDate:e.joinDate||new Date().toISOString().split("T")[0]};l([...r,t])},updateEmployee:(e,t)=>{l(r.map(r=>r.id===e?{...r,...t}:r))},deleteEmployee:e=>{l(r.filter(t=>t.id!==e)),o(n.filter(t=>{var a;return t.assignedTo!==(null===(a=r.find(t=>t.id===e))||void 0===a?void 0:a.email)}))},getEmployee:e=>r.find(t=>t.id===e),tasks:n,addTask:e=>{let t={...e,id:Date.now().toString()};o([...n,t])},updateTask:(e,t)=>{o(n.map(r=>r.id===e?{...r,...t}:r))},deleteTask:e=>{o(n.filter(t=>t.id!==e))},getTasksByEmployee:e=>n.filter(t=>t.assignedTo===e),currentUser:d,login:(e,t)=>{let a=localStorage.getItem("user");if(a)try{let t=JSON.parse(a),r="super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee";return m({email:t.email||e,role:r}),!0}catch(e){console.error("Error parsing user data:",e)}let s=r.find(t=>t.email===e);return!!s&&(m({email:s.email,role:"Admin"===s.role?"Admin":"Employee"}),!0)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),m(null)},isAuthenticated:!!d},children:t})},n=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e}}},function(e){e.O(0,[569,971,472,744],function(){return e(e.s=178)}),_N_E=e.O()}]);