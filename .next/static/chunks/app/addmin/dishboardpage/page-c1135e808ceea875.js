(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{791:function(e,t,a){Promise.resolve().then(a.bind(a,5729))},5729:function(e,t,a){"use strict";a.r(t);var s=a(7437),i=a(2265),r=a(5322),n=a(1728);t.default=()=>{let{employees:e,tasks:t}=(0,r.q)(),[a,l]=(0,i.useState)([]),[o,d]=(0,i.useState)([]),[m,c]=(0,i.useState)(Date.now());(0,i.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("hr_attendance");e&&l(JSON.parse(e))};e();let t=setInterval(e,3e3);return()=>clearInterval(t)},[]),(0,i.useEffect)(()=>{let e=setInterval(()=>{c(Date.now())},6e4);return()=>clearInterval(e)},[]),(0,i.useEffect)(()=>{let s=()=>{let s=[];e.forEach(e=>{if(e.joinDate){let t=new Date(e.joinDate).getTime(),a=Math.floor((Date.now()-t)/864e5);a<=30&&a>=0&&s.push({id:"reg-".concat(e.id),employeeName:e.name,employeeEmail:e.email,action:"registered as new employee",timestamp:t,type:"registration"})}}),t.forEach(t=>{if("completed"===t.status&&t.assignedTo){let a=e.find(e=>e.email===t.assignedTo);if(a){let e=Date.now()-6048e5*Math.random();s.push({id:"task-".concat(t.id),employeeName:a.name,employeeEmail:a.email,action:"completed task assignment: ".concat(t.title),timestamp:e,type:"task"})}}});let i=new Date().toISOString().split("T")[0];a.forEach(t=>{if(t.date===i&&t.checkIn){let a=e.find(e=>e.email===t.employeeEmail);if(a){let e=new Date("".concat(i," ").concat(t.checkIn)).getTime();s.push({id:"attendance-".concat(t.id,"-in"),employeeName:a.name,employeeEmail:a.email,action:"checked in for work",timestamp:e,type:"attendance"})}}});let r=s.sort((e,t)=>t.timestamp-e.timestamp).slice(0,50);d(r)};s();let i=setInterval(s,5e3);return()=>clearInterval(i)},[e,t,a]);let p=e.filter(e=>"Employee"===e.role).length,h=new Date().toISOString().split("T")[0],u=a.filter(e=>e.date===h&&e.checkIn).length,f=p>0?(u/p*100).toFixed(1):"0",x=p-u,g=p>0?(x/p*100).toFixed(1):"0",w=new Date().toISOString().slice(0,7)+"-01",y=e.filter(e=>!!e.joinDate&&e.joinDate>=w).length,j=new Date;j.setMonth(j.getMonth()-1);let v=j.toISOString().slice(0,7)+"-01",N=new Date(j.getFullYear(),j.getMonth()+1,0).toISOString().split("T")[0],S=e.filter(e=>!!e.joinDate&&e.joinDate>=v&&e.joinDate<=N).length,b=S>0?((p-S)/S*100).toFixed(1):p>0?"100":"0",E=S>0?((y-S)/S*100).toFixed(1):y>0?"100":"0",_=e=>{let t=Math.floor(Math.floor((m-e)/1e3)/60),a=Math.floor(t/60),s=Math.floor(a/24);return s>0?"".concat(s," ").concat(1===s?"day":"days"," ago"):a>0?"".concat(a," ").concat(1===a?"hour":"hours"," ago"):t>0?"".concat(t," ").concat(1===t?"minute":"minutes"," ago"):"Just now"},k=o.sort((e,t)=>t.timestamp-e.timestamp).slice(0,10);return(0,s.jsx)(n.Z,{allowedRoles:["admin","Admin","super_admin","SuperAdmin"],children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white/70",children:"Total Employees"}),(0,s.jsx)("div",{className:"w-16 h-16 bg-purple-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})})]}),(0,s.jsx)("p",{className:"text-4xl font-bold text-white mb-2",children:p}),(0,s.jsxs)("p",{className:"text-sm text-green-400 font-medium",children:["+",b,"%"]})]}),(0,s.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white/70",children:"Active Today"}),(0,s.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("p",{className:"text-4xl font-bold text-white mb-2",children:u}),(0,s.jsxs)("p",{className:"text-sm text-green-400 font-medium",children:[f,"%"]})]}),(0,s.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white/70",children:"On Leave"}),(0,s.jsx)("div",{className:"w-16 h-16 bg-orange-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),(0,s.jsx)("p",{className:"text-4xl font-bold text-white mb-2",children:x}),(0,s.jsxs)("p",{className:"text-sm text-red-400 font-medium",children:[g,"%"]})]}),(0,s.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white/70",children:"New This Month"}),(0,s.jsx)("div",{className:"w-16 h-16 bg-purple-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),(0,s.jsx)("p",{className:"text-4xl font-bold text-white mb-2",children:y}),(0,s.jsxs)("p",{className:"text-sm text-green-400 font-medium",children:["+",E,"%"]})]})]}),(0,s.jsxs)("div",{className:"glass-effect rounded-2xl p-6 card-shadow border border-white/10",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Recent Activity"}),(0,s.jsx)("div",{className:"space-y-4",children:k.length>0?k.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start space-x-3 pb-4 ".concat(t<k.length-1?"border-b border-white/10":""),children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"text-white/90",children:[(0,s.jsx)("span",{className:"text-purple-400 font-semibold",children:e.employeeName})," ",(0,s.jsx)("span",{className:"text-white/70",children:e.action})]}),(0,s.jsx)("p",{className:"text-xs text-white/50 mt-1",children:_(e.timestamp)})]})]},e.id)):(0,s.jsx)("p",{className:"text-white/60 text-center py-4",children:"No recent activity"})})]})]})})}},1728:function(e,t,a){"use strict";var s=a(7437),i=a(2265),r=a(4033),n=a(5322);t.Z=e=>{let{children:t,allowedRoles:a}=e,{currentUser:l,isAuthenticated:o}=(0,n.q)(),d=(0,r.useRouter)(),m=(0,r.usePathname)();if((0,i.useEffect)(()=>{if(!o){d.push("/auth/loginpage");return}if(l){let e=l.role,t="SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"employee",s=a.map(e=>"SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"Employee"===e?"employee":"super_admin"===e?"super_admin":"admin"===e?"admin":"employee"===e?"employee":e);s.includes(t)||("employee"===t?d.push("/empolyee/dishboard"):"admin"===t?d.push("/addmin/dishboardpage"):"super_admin"===t?d.push("/superadmin/dashboard"):d.push("/auth/loginpage"))}},[l,o,a,d,m]),!o||!l)return null;let c=l.role,p=a.map(e=>"SuperAdmin"===e?"super_admin":"Admin"===e?"admin":"Employee"===e?"employee":"super_admin"===e?"super_admin":"admin"===e?"admin":"employee"===e?"employee":e);return p.includes("SuperAdmin"===c?"super_admin":"Admin"===c?"admin":"employee")?(0,s.jsx)(s.Fragment,{children:t}):null}},5322:function(e,t,a){"use strict";a.d(t,{q:function(){return l},w:function(){return n}});var s=a(7437),i=a(2265);let r=(0,i.createContext)(void 0),n=e=>{let{children:t}=e,[a,n]=(0,i.useState)([]),[l,o]=(0,i.useState)([]),[d,m]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let t=JSON.parse(e);m({email:t.email,role:"super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee"})}catch(e){console.error("Error parsing user data:",e)}let t=localStorage.getItem("hr_employees"),a=localStorage.getItem("hr_tasks");if(t)n(JSON.parse(t));else{let e=[{id:"1",name:"Ali Khan",email:"ali@example.com",department:"Engineering",position:"Software Developer",phone:"+1 234 567 8900",address:"123 Main St, City, State 12345",joinDate:"2023-01-15",role:"Employee",status:"Active"},{id:"2",name:"Sara Ahmed",email:"sara@example.com",department:"Marketing",position:"Marketing Manager",phone:"+1 234 567 8901",address:"456 Oak Ave, City, State 12345",joinDate:"2023-02-20",role:"Employee",status:"Active"},{id:"3",name:"Admin User",email:"admin@example.com",department:"Administration",position:"System Administrator",phone:"+1 234 567 8902",address:"789 Admin Blvd, City, State 12345",joinDate:"2023-01-01",role:"Admin",status:"Active"}];n(e),localStorage.setItem("hr_employees",JSON.stringify(e))}if(a)o(JSON.parse(a));else{let e=[{id:"1",title:"Complete quarterly report",status:"pending",priority:"High",dueDate:"2024-01-20",assignedTo:"ali@example.com",description:"Complete the quarterly financial report"},{id:"2",title:"Update database schema",status:"completed",priority:"Medium",dueDate:"2024-01-15",assignedTo:"ali@example.com",description:"Update the database schema for new features"},{id:"3",title:"Review code changes",status:"pending",priority:"Medium",dueDate:"2024-01-22",assignedTo:"sara@example.com",description:"Review pull requests and code changes"}];o(e),localStorage.setItem("hr_tasks",JSON.stringify(e))}},[]),(0,i.useEffect)(()=>{a.length>0&&localStorage.setItem("hr_employees",JSON.stringify(a))},[a]),(0,i.useEffect)(()=>{l.length>0&&localStorage.setItem("hr_tasks",JSON.stringify(l))},[l]),(0,s.jsx)(r.Provider,{value:{employees:a,addEmployee:e=>{let t={...e,id:Date.now().toString(),joinDate:e.joinDate||new Date().toISOString().split("T")[0]};n([...a,t])},updateEmployee:(e,t)=>{n(a.map(a=>a.id===e?{...a,...t}:a))},deleteEmployee:e=>{n(a.filter(t=>t.id!==e)),o(l.filter(t=>{var s;return t.assignedTo!==(null===(s=a.find(t=>t.id===e))||void 0===s?void 0:s.email)}))},getEmployee:e=>a.find(t=>t.id===e),tasks:l,addTask:e=>{let t={...e,id:Date.now().toString()};o([...l,t])},updateTask:(e,t)=>{o(l.map(a=>a.id===e?{...a,...t}:a))},deleteTask:e=>{o(l.filter(t=>t.id!==e))},getTasksByEmployee:e=>l.filter(t=>t.assignedTo===e),currentUser:d,login:(e,t)=>{let s=localStorage.getItem("user");if(s)try{let t=JSON.parse(s),a="super_admin"===t.role?"SuperAdmin":"admin"===t.role?"Admin":"Employee";return m({email:t.email||e,role:a}),!0}catch(e){console.error("Error parsing user data:",e)}let i=a.find(t=>t.email===e);return!!i&&(m({email:i.email,role:"Admin"===i.role?"Admin":"Employee"}),!0)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),m(null)},isAuthenticated:!!d},children:t})},l=()=>{let e=(0,i.useContext)(r);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e}},622:function(e,t,a){"use strict";var s=a(2265),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,a){var s,r={},d=null,m=null;for(s in void 0!==a&&(d=""+a),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(m=t.ref),t)n.call(t,s)&&!o.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:i,type:e,key:d,ref:m,props:r,_owner:l.current}}t.Fragment=r,t.jsx=d,t.jsxs=d},7437:function(e,t,a){"use strict";e.exports=a(622)},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=791)}),_N_E=e.O()}]);